<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org"
	  xmlns:shiro="http://www.pollix.at/thymeleaf/shiro">
<head>
	<meta charset="utf-8">
	<title>订单管理</title>
	<meta name="renderer" content="webkit">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
	<meta http-equiv="Access-Control-Allow-Origin" content="*">
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
	<meta name="apple-mobile-web-app-status-bar-style" content="black">
	<meta name="apple-mobile-web-app-capable" content="yes">
	<meta name="format-detection" content="telephone=no">

	<link rel="stylesheet" href="/layui/css/layui.css" media="all" />
	<link rel="stylesheet" href="/css/index.css" media="all" />
</head>
<body class="main_body">
	<div class="layui-layout layui-layout-admin">
		<!-- 顶部 -->
		<div class="layui-header header">
			<div class="layui-main mag0">
				<a href="#" class="logo">天猫书籍管理</a>
				<!-- 显示/隐藏菜单 -->
				<a href="javascript:;" class="seraph hideMenu layui-icon layui-icon-shrink-right"></a>
				<!-- 顶级菜单 -->
				<ul class="layui-nav mobileTopLevelMenus" mobile>
					<li class="layui-nav-item" data-menu="contentManagement">
						<a href="javascript:;"><i class="seraph icon-caidan"></i><cite>订单管理</cite></a>
						<dl class="layui-nav-child">
							<dd class="layui-this" data-menu="contentManagement"><a href="javascript:;"><i class="layui-icon" data-icon="&#xe63c;">&#xe63c;</i><cite>内容管理</cite></a></dd>
							<dd data-menu="memberCenter"><a href="javascript:;"><i class="seraph icon-icon10" data-icon="icon-icon10"></i><cite>用户中心</cite></a></dd>
							<dd data-menu="systemeSttings"><a href="javascript:;"><i class="layui-icon" data-icon="&#xe620;">&#xe620;</i><cite>系统设置</cite></a></dd>
						</dl>
					</li>
				</ul>
				<ul class="layui-nav topLevelMenus" pc>
					<li class="layui-nav-item layui-this" data-menu="contentManagement">
						<a href="javascript:;"><i class="layui-icon" data-icon="&#xe63c;">&#xe63c;</i><cite>内容管理</cite></a>
					</li>
					<li class="layui-nav-item" data-menu="memberCenter" pc>
						<a href="javascript:;"><i class="seraph icon-icon10" data-icon="icon-icon10"></i><cite>用户中心</cite></a>
					</li>
					<li class="layui-nav-item" data-menu="systemeSttings" pc>
						<a href="javascript:;"><i class="layui-icon" data-icon="&#xe620;">&#xe620;</i><cite>系统设置</cite></a>
					</li>
				</ul>

			    <!-- 顶部右侧菜单 -->
			    <ul class="layui-nav top_menu">
					<li class="layui-nav-item" pc>
						<a href="javascript:;" class="clearCache"><i class="layui-icon" data-icon="&#xe640;">&#xe640;</i><cite>清除缓存</cite><span class="layui-badge-dot"></span></a>
					</li>
					<li class="layui-nav-item" id="userInfo">
						<a href="javascript:;"><img src="/images/face.jpg" id="imgFace" class="layui-nav-img" width="35" height="35"><cite class="adminName"><shiro:principal property="realname"/></cite></a>
						<dl class="layui-nav-child">
							<dd><a href="javascript:;" id="updatePassword"><i class="seraph icon-xiugai" data-icon="icon-xiugai"></i><cite>修改密码</cite></a></dd>

							<dd><a href="javascript:;" id="logout" class="signOut"><i class="seraph icon-tuichu"></i><cite>退出</cite></a></dd>
						</dl>
					</li>
				</ul>
			</div>
		</div>
		<!-- 左侧导航 -->
		<div class="layui-side layui-bg-black">
			<div class="user-photo">
				<a class="img" title="我的头像" ><img  src="/images/3.jpg" id="imgId" ></a>

				<p>你好！<span class="userName"><shiro:principal type="com.jackguo.entil.ActiveUser" property="realname"/></span>, 欢迎登录</p>
			</div>


			<div class="navBar layui-side-scroll" id="navBar">
				<ul class="layui-nav layui-nav-tree">
					<li class="layui-nav-item layui-this">
						<a href="javascript:;" data-url="page/main.html"><i class="layui-icon" data-icon=""></i><cite>后台首页</cite></a>
					</li>
				</ul>
			</div>
		</div>
		<!-- 右侧内容 -->


		<div class="layui-body layui-form">
			<div class="layui-tab mag0" lay-filter="bodyTab" id="top_tabs_box">
				<ul class="layui-tab-title top_tab" id="top_tabs">
					<li class="layui-this" lay-id=""><i class="layui-icon">&#xe68e;</i> <cite>后台首页</cite></li>
				</ul>
				<ul class="layui-nav closeBox">
				  <li class="layui-nav-item">
				    <a href="javascript:;"><i class="layui-icon caozuo">&#xe643;</i> 页面操作</a>
				    <dl class="layui-nav-child">
					  <dd><a href="javascript:;" class="refresh refreshThis"><i class="layui-icon">&#x1002;</i> 刷新当前</a></dd>
				      <dd><a href="javascript:;" class="closePageOther"><i class="seraph icon-prohibit"></i> 关闭其他</a></dd>
				      <dd><a href="javascript:;" class="closePageAll"><i class="seraph icon-guanbi"></i> 关闭全部</a></dd>
				    </dl>
				  </li>
				</ul>
				<div class="layui-tab-content clildFrame">
					<div class="layui-tab-item layui-show">
						<iframe src="/page/welcome"></iframe>
					</div>
				</div>
			</div>
		</div>
		<!-- 底部 -->
		<div class="layui-footer footer">
<!--			<p><span>copyright @2021 牛马管理员</span></p>-->
			<p><span id="clock"></span></p>
		</div>

	</div>

	<p id="userImg" style="display: none"><shiro:principal type="com.jackguo.entil.ActiveUser" property="img" /></p>
<!--修改密码模板-->
	<script type="text/html" id="updatePasswordTpl" >
		<form class="layui-form layui-form-pane" style="margin-left: 15px;margin-top: 15px">
			<div class="layui-form-item">
				<label class="layui-form-label">当前密码</label>
				<div class="layui-input-inline">
					<input type="text" class="layui-input" name="password" lay-verify="required" lay-reqText="当前密码不能为空" />
				</div>
			</div>
			<div class="layui-form-item">
				<label class="layui-form-label">新密码</label>
				<div class="layui-input-inline">
					<input type="text" class="layui-input" name="newPassword" lay-verify="required" lay-reqText="新密码不能为空"  />
				</div>
			</div>

			<div class="layui-form-item">
				<label class="layui-form-label">确认密码</label>
				<div class="layui-input-inline">
					<input type="text" class="layui-input" name="confirmPassword" lay-verify="required" lay-reqText="确认密码不能为空"  />
				</div>
			</div>

				<button type="button" style="display: none" id="subBtn" lay-submit lay-filter="subBtnFilter"></button>

		</form>



	</script>


	<script type="text/javascript" src="/layui/layui.js"></script>
	<script type="text/javascript" src="/js/index.js"></script>
	<script type="text/javascript" src="/js/cache.js"></script>
<!--	<script type="text/javascript" src="/js/bodyTab.js"></script>-->
<script>
	layui.use(['jquery','form'],function (){
		let $ =layui.jquery;
		let form=layui.form;
		$("#logout").click(function (){
			$.get("/sysuser/logout",function (rs){
				if (rs.code ==200){
				//	推出成功
					parent.window.location.href= "/page/login";
				}

			})

		})

			let imgUrl=$("#userImg").html();
			let path= "/images/"+imgUrl;
 			// let src=$("#imgId")[0].src;
			$("#imgId").attr("src",path);
			$("#imgFace").attr("src",path);


	//	修改密码的方法
		$("#updatePassword").click(function (){
			let layOps={
				title:"修改密码",
				type:1,
				content:$("#updatePasswordTpl").html(),
				area:['373px','341px'],
				success:function (layero,index) {
					form.render("radio");
					form.on("submit(subBtnFilter)", function (d) {
						let formData = d.field;
						let newPassword =formData.newPassword;
						let confirmPassword=formData.confirmPassword;
						if(newPassword !=confirmPassword){
							layer.msg("确认密码不一致请重新输入");
							return  false;

						}
						$.post("/sysuser/updatePassword.do", formData, function (rs) {
							layer.msg(rs.msg);
							if (rs.code != 200) {
								return false;
							}
							layer.close(index);
							$("#searchBtn").click();

						})
						return false;

					})
				},
					btn:['确认','取消'],
							btnAlign:"c",
							yes:function (index,layero) {
						//点击隐藏的提交按钮  触发 表单提交监听
						$("#subBtn").click();
						}
					};
					layer.open(layOps);
		});








	})

</script>
<script type="text/javascript">
		var clock = new Clock();
		clock.display(document.getElementById("clock"));


		function Clock() {
			var date = new Date();
			this.year = date.getFullYear();
			this.month = date.getMonth() + 1;
			this.date = date.getDate();
			this.day = new Array("星期日", "星期一", "星期二", "星期三", "星期四", "星期五", "星期六")[date.getDay()];
			this.hour = date.getHours() < 10 ? "0" + date.getHours() : date.getHours();
			this.minute = date.getMinutes() < 10 ? "0" + date.getMinutes() : date.getMinutes();
			this.second = date.getSeconds() < 10 ? "0" + date.getSeconds() : date.getSeconds();

			this.toString = function() {
				return "现在是:" + this.year + "年" + this.month + "月" + this.date + "日 " + this.hour + ":" + this.minute + ":" + this.second + " " + this.day;
			};

			this.toSimpleDate = function() {
				return this.year + "-" + this.month + "-" + this.date;
			};

			this.toDetailDate = function() {
				return this.year + "-" + this.month + "-" + this.date + " " + this.hour + ":" + this.minute + ":" + this.second;
			};

			this.display = function(ele) {
				var clock = new Clock();
				ele.innerHTML = clock.toString();
				window.setTimeout(function() {clock.display(ele);}, 1000);
			};
		}

	</script>


</body>
</html>